(this.webpackJsonpfive=this.webpackJsonpfive||[]).push([[0],{100:function(e,t,r){},221:function(e,t,r){},222:function(e,t,r){},223:function(e,t,r){},224:function(e,t,r){},225:function(e,t,r){},231:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(85),a=r.n(c),s=r(24),o=(r(99),r(2)),i=(r(100),r(51)),l=r.n(i),d=r(86),j=r(5),u=r(87),m=r.n(u),h=r(1),b=Object(n.createContext)(),O=function(e){var t=Object(n.useState)([]),r=Object(j.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(0),o=Object(j.a)(s,2),i=o[0],u=o[1],O=Object(n.useState)(!0),p=Object(j.a)(O,2),x=p[0],f=p[1],g=Object(n.useState)(""),v=Object(j.a)(g,2),_=v[0],N=v[1],k=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("https://run.mocky.io/v3/59f47e8e-2a09-48c3-8a1d-0af8e5817f7c").then((function(e){return JSON.parse(e.data)}));case 2:t=e.sent,a(t),f(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){k()}),[]),Object(n.useEffect)((function(){!function(){var e=c.reduce((function(e,t){return e+t.amount*t.price}),0);u(e)}()}));var C={products:c,totalPrice:i,address:_,loading:x,changeAmount:function(e,t){var r=c.map((function(r){return r.id===e&&(r.amount=r.amount+t),r}));a(r)},removeProduct:function(e){var t=c.filter((function(t){return t.id!==e}));a(t)},changeAddress:function(e){N(e)}};return Object(h.jsx)(b.Provider,{value:C,children:e.children})},p=r(28),x=r(94),f=r(19),g=r.p+"static/media/preloader.44de7d6e.svg",v=r(93),_=r.n(v),N=function(e){return Object(h.jsx)("div",{className:_.a.preloader,children:Object(h.jsx)("img",{src:g,alt:"Preloader"})})},k=(r(221),function(e){var t=e.amount,r=e.id,c=e.img,a=e.name,s=e.price,o=e.type,i=Object(n.useContext)(b),l=i.changeAmount,d=i.removeProduct,j=s*t;return Object(h.jsxs)("li",{className:"list-item",children:[Object(h.jsx)("img",{className:"list-item__img",src:c,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430"}),Object(h.jsxs)("div",{className:"list-item__column-left",children:[Object(h.jsxs)("div",{className:"list-item-wrapper",children:[Object(h.jsx)("p",{className:"list-item__name",children:a}),Object(h.jsx)("p",{className:"list-item__description",children:o})]}),Object(h.jsxs)("div",{className:"list-item__amount",children:[t>1?Object(h.jsx)("div",{onClick:function(){return l(r,-1)},children:"\u2013"}):Object(h.jsx)("div",{children:"\u2013"}),Object(h.jsx)("p",{children:t}),Object(h.jsx)("div",{onClick:function(){return l(r,1)},children:"+"})]})]}),Object(h.jsxs)("div",{className:"list-item__column-right",children:[Object(h.jsxs)("p",{children:[j," \u0440\u0443\u0431."]}),Object(h.jsx)("p",{className:"list-item__remove",onClick:function(){return d(r)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})}),C=(r(222),function(){var e=Object(n.useContext)(b),t=e.products,r=e.totalPrice,c=e.loading,a=t.map((function(e){return Object(h.jsx)(k,Object(p.a)({},e),e.id)}));return Object(h.jsxs)("div",{className:"order",children:[Object(h.jsx)("h2",{className:"order__title",children:"\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u044b:"}),c?Object(h.jsx)(N,{}):t.length?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("ul",{className:"order-list",children:a}),Object(h.jsxs)("div",{className:"total-price",children:[Object(h.jsx)("p",{children:"\u0418\u0442\u043e\u0433:"}),r," \u0440\u0443\u0431."]})]}):Object(h.jsx)("p",{children:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a"})]})}),F=r(41);r(223);var y=function(){var e=Object(n.useContext)(b).address,t=Object(n.useState)([55.76,37.62]),r=Object(j.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(null),o=Object(j.a)(s,2),i=o[0],l=o[1];return Object(n.useEffect)((function(){e&&i&&i.geocode(e).then((function(e){a(e.geoObjects.get(0).geometry.getCoordinates())}))}),[e]),Object(h.jsx)("div",{children:Object(h.jsx)(F.c,{query:{load:"package.full",lang:"ru_RU",apikey:"41694293-66c0-4133-89c1-0a6928c2497e"},children:Object(h.jsx)(F.a,{className:"map",defaultState:{center:[55.76,37.62],zoom:12},state:{center:c,zoom:12,controls:[]},modules:["geolocation","geocode"],onLoad:function(t){!function(t){e&&t.geocode(e).then((function(e){a(e.geoObjects.get(0).geometry.getCoordinates())}))}(t),l(t)},children:Object(h.jsx)(F.b,{geometry:c,properties:{hintContent:e},options:{preset:"islands#blueDotIcon"}})})})})},S=(r(224),function(){var e=Object(n.useContext)(b),t=e.products,r=e.totalPrice,c=e.address,a=e.changeAddress,s=Object(x.a)({initialValues:{address:c,name:"",phone:"",email:"",package:"",comments:""},validationSchema:f.a({address:f.b().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!"),name:f.b().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!"),phone:f.b().matches(/[0-9\s\.\-\+\(\)]{6,20}/,"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!"),email:f.b().email("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 email \u0430\u0434\u0440\u0435\u0441").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!"),package:f.b().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435!")}),onSubmit:function(e){var n=Object(p.a)(Object(p.a)({},e),{},{products:t,totalPrice:r});alert(JSON.stringify(n,null,2)),console.log(JSON.stringify(n,null,2))}});return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("form",{className:"orderForm",onSubmit:s.handleSubmit,children:[s.errors.address&&s.touched.address?Object(h.jsx)("div",{className:"error",children:s.errors.address}):null,Object(h.jsx)("label",{className:"orderForm__label",htmlFor:"address",children:"\u0410\u0434\u0440\u0435\u0441"}),Object(h.jsx)("textarea",{className:s.errors.address&&s.touched.address?"orderForm__item error":"orderForm__item",id:"address",name:"address",type:"text",onChange:s.handleChange,onBlur:function(){s.touched.address=!0,a(s.values.address)},value:s.values.address}),Object(h.jsx)(y,{}),Object(h.jsxs)("div",{className:"orderForm-wrapper",children:[Object(h.jsxs)("div",{className:"orderForm__column",children:[s.errors.name&&s.touched.name?Object(h.jsx)("div",{className:"error",children:s.errors.name}):null,Object(h.jsx)("input",{className:s.errors.name&&s.touched.name?"orderForm__item error":"orderForm__item",id:"name",name:"name",type:"text",placeholder:"\u0412\u0430\u0448\u0435 \u0418\u043c\u044f",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.name})]}),Object(h.jsxs)("div",{className:"orderForm__column",children:[s.errors.phone&&s.touched.phone?Object(h.jsx)("div",{className:"error",children:s.errors.phone}):null,Object(h.jsx)("input",{className:s.errors.phone&&s.touched.phone?"orderForm__item error":"orderForm__item",id:"phone",name:"phone",type:"tel",placeholder:"\u0412\u0430\u0448 \u0442\u0435\u043b\u0435\u0444\u043e\u043d",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.phone})]})]}),s.errors.email&&s.touched.email?Object(h.jsx)("div",{className:"error",children:s.errors.email}):null,Object(h.jsx)("input",{className:s.errors.email&&s.touched.email?"orderForm__item error":"orderForm__item",id:"email",name:"email",type:"email",placeholder:"\u0412\u0430\u0448 Email",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.email}),s.errors.package&&s.touched.package?Object(h.jsx)("div",{className:"error",children:s.errors.package}):null,Object(h.jsxs)("select",{className:s.errors.package&&s.touched.package?"orderForm__item error":"orderForm__item",id:"package",name:"package",placeholder:"Nbg",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.package,children:[Object(h.jsx)("option",{hidden:!0,value:"none",children:"\u0422\u0438\u043f \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438"}),Object(h.jsx)("option",{value:"without packaging",children:"\u0411\u0435\u0437 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0438"}),Object(h.jsx)("option",{value:"standart",children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0430\u044f"}),Object(h.jsx)("option",{value:"gift",children:"\u041f\u043e\u0434\u0430\u0440\u043e\u0447\u043d\u0430\u044f"})]}),Object(h.jsx)("textarea",{className:"orderForm__item",id:"comments",name:"comments",type:"text",rows:"1",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",onChange:s.handleChange,value:s.values.comments}),Object(h.jsx)(C,{}),Object(h.jsx)("button",{className:"order-button",type:"submit",children:"\u041a\u0443\u043f\u0438\u0442\u044c"})]})})}),w=(r(225),function(){return Object(h.jsxs)("div",{className:"basket",children:[Object(h.jsx)("h1",{className:"basket__title",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),Object(h.jsxs)("div",{className:"basket-wrapper",children:[Object(h.jsx)("span",{className:"basket__login",children:"\u0415\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?"}),Object(h.jsx)(s.b,{className:"basket__link",to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(h.jsx)(S,{})]})}),B=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("h1",{children:"Login"})})};var P=function(){return Object(h.jsx)(O,{children:Object(h.jsxs)("div",{className:"app-wrapper",children:[Object(h.jsx)("header",{className:"app-header"}),Object(h.jsxs)(o.d,{children:[Object(h.jsx)(o.b,{exact:!0,path:"/",render:function(){return Object(h.jsx)(o.a,{to:"/basket"})}}),Object(h.jsx)(o.b,{path:"/basket",render:function(){return Object(h.jsx)(w,{})}}),Object(h.jsx)(o.b,{path:"/login",render:function(){return Object(h.jsx)(B,{})}}),Object(h.jsx)(o.b,{path:"*",render:function(){return Object(h.jsx)("div",{children:"404 Not found"})}})]})]})})};a.a.render(Object(h.jsx)(s.a,{children:Object(h.jsx)(P,{})}),document.getElementById("root"))},93:function(e,t,r){e.exports={preloader:"Preloader_preloader__1EXfa"}},99:function(e,t,r){}},[[231,1,2]]]);
//# sourceMappingURL=main.4c69459b.chunk.js.map